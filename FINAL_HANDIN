ğŸ Project Summary
Project: FitMealAPI
Author: Jantie Larsen
Student ID: cph-jl398
Submitted: April 2025


A secure and production-ready Java backend for tracking healthy meals and workouts, built using Spring Boot. Supports
login with JWT, role-based access control, integration with external APIs, and full CRUD functionality.

ğŸ”§ Tech Stack
Layer	Tech
Language	Java 17
Framework	Spring Boot 3
ORM	JPA + Hibernate
DB	PostgreSQL
Security	Spring Security + JWT
Build Tool	Maven
Deployment	Docker, DigitalOcean, Caddy
Docs/Diagrams	PlantUML


ğŸŒ Deployment Info
Domain	https://jjldomain.dk
Server	DigitalOcean Droplet (Ubuntu 24.10)
Reverse Proxy	Caddy (Auto HTTPS via Let's Encrypt)
Database	PostgreSQL (Docker container)
API Port	8081 (Internally mapped by Caddy)


ğŸ” Login Info (for testing)
Username	Password	Role
testuser	password	ADMIN
Use /auth/login to receive a JWT token. Add it to protected requests like this:


Authorization: Bearer <TOKEN>
ğŸ“® Example API Requests
1. ğŸ” Login (Get JWT)

POST https://jjldomain.dk/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "password"
}


2. ğŸ½ï¸ Get Meals (Protected - ADMIN)

GET https://jjldomain.dk/api/meals
Authorization: Bearer {{jwt_token}}


3. ğŸ‹ï¸ Get Workouts (Protected - USER/ADMIN)

GET https://jjldomain.dk/workouts
Authorization: Bearer {{jwt_token}}

âœ… Features Implemented
Feature	Description	Status
Fetch & store meals from TheMealDB	External API integration
Fetch & store workouts from WGER	External API integration
Save, update, delete meal/workout	Full CRUD operations
Secure login with JWT	Role-based auth (ADMIN/USER)
Spring Security filter config	JWT + Bcrypt + filter chain
Manual API test suite (http file)	For local + deployed testing
Docker containerization	For app + db
Deployment to DigitalOcean	Reverse proxy, HTTPS
Domain + SSL config (jjldomain.dk)	Accessible externally
Class + Sequence + Use Case diagrams	Via PlantUML


ğŸ“Š Diagrams
Class Diagram: src/main/resources/docs/ClassDiagram.puml

Use Case Diagram: src/main/resources/docs/UseCaseDiagram.puml

Sequence Diagram: src/main/resources/docs/SequenceDiagram.puml

Domain Model & Architecture overview

All diagrams included in /docs folder and available via PlantUML.


ğŸ’¬ Notes
ğŸ”„ Misunderstanding on Framework
While the assignment originally asked for Javalin, I misunderstood and went with Spring Boot from the beginning.
This was a conscious decision in the end â€” prioritizing security, production readiness, and learning goals over sticking
with the exact tech mentioned.

ğŸ” CORS, 403, and / Root Path
Root path (/) returns HTTP 403 intentionally. It's a secure backend â€” only valid JWT-authenticated users can access
protected data (e.g. /api/meals, /workouts). No frontend is exposed yet â€” to be built in next module.


ğŸ§ª Test Coverage
Layer	Tools	Tested Classes
DAO	JUnit + H2	MealDAOTests, WorkoutDAOTests
Service	JUnit + Mockito	MealServiceTests, WorkoutServiceTests
Controller	Spring MockMvc	MealControllerTest, WorkoutControllerTest


ğŸš€ How to Run (Locally)

# Clone project
git clone https://github.com/Jalller/FitMealAPI.git
cd FitMealAPI

# Run with Maven
./mvnw spring-boot:run
Database config in application.properties.

âœ… FINAL STATUS
Requirement	Done	Where / Notes
Secure login with JWT	âœ…	Spring Security + JWT + Bcrypt
Role-based route protection	âœ…	USER vs ADMIN in SecurityConfig.java
CRUD for Meal and Workout	âœ…	/api/meals/** and /workouts/**
Integration with 2 APIs	âœ…	TheMealDB + WGER
Tests for DAO, Service, Controller	âœ…	6 test classes
Docker setup	âœ…	Dockerfile + docker-compose.yml
Deployment	âœ…	On DigitalOcean with Caddy
Custom domain + HTTPS	âœ…	https://jjldomain.dk
API Docs	âœ…	test-api.http (for localhost + prod)
Diagrams	âœ…	/docs folder
ğŸ‘ Thank you for reading!
Jantie & ğŸ± Max out.

ğŸ›°ï¸ FitMeal Deployment Preview
ğŸŒ Live Domain
Your backend is successfully deployed and live at:

ğŸ”— https://jjldomain.dk

Caddy handles the reverse proxy and SSL (HTTPS).

âœ… Whatâ€™s Working
Feature	Status	Notes
Server responds on domain	âœ… Done	Confirmed via curl and browser with 403 (auth protected)
JWT login	âœ… Done	POST /auth/login works, returns valid JWT
Protected meal fetch	âœ… Done	GET /api/meals works with token (403 without token)
Caddy reverse proxy config	âœ… Done	Live and auto-renewing HTTPS from Let's Encrypt
DigitalOcean droplet setup	âœ… Done	Docker containers running: PostgreSQL + Spring Boot app
Domain linked to server IP	âœ… Done	DNS records pointed correctly â†’ ping shows correct IP
ğŸ§ª How to Test It
Login (get token):

http
Copy
POST https://jjldomain.dk/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "password"
}
Use token to fetch meals:

http
Copy
GET https://jjldomain.dk/api/meals
Authorization: Bearer <PASTE_TOKEN_HERE>
You can automate this inside your .http file using:

http
Copy
### Login & store token
@jwt_token = {{login.response.body.$.token}}

### Fetch meals using token
GET https://jjldomain.dk/api/meals
Authorization: Bearer {{jwt_token}}
ğŸ‘€ What Happens Ifâ€¦
Scenario	Response
Visiting domain directly in browser	403 Forbidden (as expected â€“ secured API)
Invalid or expired token	403 Forbidden
No token provided	403 Forbidden
Valid token with wrong role	403 Forbidden (if accessing admin routes)
Valid token with correct role	200 OK with JSON meal data
ğŸ’¡ Want to Auto-Open Browser with Data?
You canâ€™t open the browser with JSON after login in .http files, but you can:

Use an HTTP client browser extension to save the token and hit your endpoint

Or build a tiny front-end page to make a fetch() call to /api/meals with the token

Or just keep using .http files in IntelliJ for testing

ğŸ›‘ Why Does jjldomain.dk Return 403?
Because your / root route isnâ€™t defined or exposed in Spring. Your app is a secured API â€” not a public homepage. So Caddy forwards the request to Spring Boot, which replies with 403 Forbidden unless a valid token is provided.

ğŸ“¦ Summary
âœ”ï¸ Production-ready backend
âœ”ï¸ Secure JWT authentication
âœ”ï¸ Deployed live with HTTPS
âœ”ï¸ Connected custom domain
âœ”ï¸ Reverse proxy, firewall, Docker all set